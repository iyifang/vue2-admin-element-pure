{"remainingRequest":"D:\\Demo\\新建文件夹\\vue2-admin-element-pure\\node_modules\\babel-loader\\lib\\index.js!D:\\Demo\\新建文件夹\\vue2-admin-element-pure\\src\\utils\\request.js","dependencies":[{"path":"D:\\Demo\\新建文件夹\\vue2-admin-element-pure\\src\\utils\\request.js","mtime":1658476316519},{"path":"D:\\Demo\\新建文件夹\\vue2-admin-element-pure\\babel.config.js","mtime":1663636365809},{"path":"D:\\Demo\\新建文件夹\\vue2-admin-element-pure\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Demo\\新建文件夹\\vue2-admin-element-pure\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9NZXNzYWdlQm94MiBmcm9tICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9tZXNzYWdlLWJveC5jc3MiOwppbXBvcnQgImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL2Jhc2UuY3NzIjsKaW1wb3J0IF9NZXNzYWdlQm94IGZyb20gImVsZW1lbnQtdWkvbGliL21lc3NhZ2UtYm94IjsKaW1wb3J0IF9NZXNzYWdlMiBmcm9tICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9tZXNzYWdlLmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX01lc3NhZ2UgZnJvbSAiZWxlbWVudC11aS9saWIvbWVzc2FnZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5lcnJvci5jYXVzZS5qcyI7CgovKg0KICogQERlc2NyaXB0aW9uOiANCiAqIEBWZXJzaW9uOiAyLjANCiAqIEBBdXRvcjogeWlmYW5nDQogKiBARGF0ZTogMjAyMi0wNi0xOCAxMToyMToxMw0KICogQExhc3RFZGl0b3JzOiB5aWZhbmcNCiAqIEBMYXN0RWRpdFRpbWU6IDIwMjItMDYtMTggMTc6MTM6MjcNCiAqIEBBdXRob3I6IGxhcHRvcC1mcGVqZzUzZg0KICovCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwp2YXIgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSwKICB0aW1lb3V0OiA1MDAwCn0pOwpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgaWYgKHN0b3JlLmdldHRlcnMudG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzWydYLVRva2VuJ10gPSBnZXRUb2tlbigpOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coZXJyb3IpOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7CgogIGlmIChyZXMuY29kZSAhPT0gMjAwKSB7CiAgICBfTWVzc2FnZSh7CiAgICAgIG1lc3NhZ2U6IHJlcy5tZXNzYWdlIHx8ICJFcnJvciIsCiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIGR1cmF0aW9uOiA1ICogMTAwMAogICAgfSk7CgogICAgaWYgKHJlcy5jb2RlID09PSA1MDAwOCB8fCByZXMuY29kZSA9PT0gNTAwMTIgfHwgcmVzLmNvZGUgPT09IDUwMDE0KSB7CiAgICAgIC8vIHRvIHJlLWxvZ2luCiAgICAgIF9NZXNzYWdlQm94LmNvbmZpcm0oJ+aCqOW3suazqOmUgO+8jOaCqOWPr+S7peWPlua2iOS7peWBnOeVmeWcqOatpOmhtemdou+8jOaIluWGjeasoeeZu+W9le+8jOehruiupOazqOmUgCcsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+mHjeaWsOeZu+W9lScsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIC8vIOmHjee9ruS7pOeJjAogICAgICAgIHN0b3JlLmRpc3BhdGNoKCd1c2VyL3Jlc2V0VG9rZW4nKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKHJlcy5tZXNzYWdlIHx8ICdFcnJvcicpKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHJlczsKICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKCdlcnInICsgZXJyb3IpOyAvLyBmb3IgZGVidWcKCiAgX01lc3NhZ2UoewogICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgIHR5cGU6ICdlcnJvcicsCiAgICBkdXJhdGlvbjogNSAqIDEwMDAKICB9KTsKCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IHNlcnZpY2U7"},{"version":3,"names":["axios","store","getToken","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","getters","token","headers","error","console","log","Promise","reject","response","res","data","code","message","type","duration","confirm","confirmButtonText","cancelButtonText","then","dispatch","location","reload","Error"],"sources":["D:/Demo/新建文件夹/vue2-admin-element-pure/src/utils/request.js"],"sourcesContent":["/*\r\n * @Description: \r\n * @Version: 2.0\r\n * @Autor: yifang\r\n * @Date: 2022-06-18 11:21:13\r\n * @LastEditors: yifang\r\n * @LastEditTime: 2022-06-18 17:13:27\r\n * @Author: laptop-fpejg53f\r\n */\r\nimport axios from 'axios'\r\nimport { MessageBox, Message } from 'element-ui'\r\nimport store from '@/store'\r\nimport { getToken } from '@/utils/auth'\r\n\r\nconst service = axios.create({\r\n  baseURL: process.env.VUE_APP_BASE_API,\r\n  timeout: 5000\r\n})\r\n\r\nservice.interceptors.request.use(\r\n  config => {\r\n    if (store.getters.token)\r\n    {\r\n      config.headers['X-Token'] = getToken()\r\n    }\r\n    return config\r\n  },\r\n  error => {\r\n    console.log(error);\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nservice.interceptors.response.use(\r\n  response => {\r\n\r\n    const res = response.data\r\n\r\n    if (res.code !== 200)\r\n    {\r\n      Message({\r\n        message: res.message || \"Error\",\r\n        type: 'error',\r\n        duration: 5 * 1000\r\n      })\r\n\r\n      if (res.code === 50008 || res.code === 50012 || res.code === 50014)\r\n      {\r\n        // to re-login\r\n        MessageBox.confirm('您已注销，您可以取消以停留在此页面，或再次登录，确认注销', {\r\n          confirmButtonText: '重新登录',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          // 重置令牌\r\n          store.dispatch('user/resetToken').then(() => {\r\n            location.reload()\r\n          })\r\n        })\r\n      }\r\n      return Promise.reject(new Error(res.message || 'Error'))\r\n    } else\r\n    {\r\n      return res\r\n    }\r\n  },\r\n  error => {\r\n    console.log('err' + error) // for debug\r\n    Message({\r\n      message: error.message,\r\n      type: 'error',\r\n      duration: 5 * 1000\r\n    })\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default service\r\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB;AAEA,IAAMC,OAAO,GAAGH,KAAK,CAACI,MAAN,CAAa;EAC3BC,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADM;EAE3BC,OAAO,EAAE;AAFkB,CAAb,CAAhB;AAKAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAAAC,MAAM,EAAI;EACR,IAAIZ,KAAK,CAACa,OAAN,CAAcC,KAAlB,EACA;IACEF,MAAM,CAACG,OAAP,CAAe,SAAf,IAA4Bd,QAAQ,EAApC;EACD;;EACD,OAAOW,MAAP;AACD,CAPH,EAQE,UAAAI,KAAK,EAAI;EACPC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACA,OAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAXH;AAcAd,OAAO,CAACO,YAAR,CAAqBY,QAArB,CAA8BV,GAA9B,CACE,UAAAU,QAAQ,EAAI;EAEV,IAAMC,GAAG,GAAGD,QAAQ,CAACE,IAArB;;EAEA,IAAID,GAAG,CAACE,IAAJ,KAAa,GAAjB,EACA;IACE,SAAQ;MACNC,OAAO,EAAEH,GAAG,CAACG,OAAJ,IAAe,OADlB;MAENC,IAAI,EAAE,OAFA;MAGNC,QAAQ,EAAE,IAAI;IAHR,CAAR;;IAMA,IAAIL,GAAG,CAACE,IAAJ,KAAa,KAAb,IAAsBF,GAAG,CAACE,IAAJ,KAAa,KAAnC,IAA4CF,GAAG,CAACE,IAAJ,KAAa,KAA7D,EACA;MACE;MACA,YAAWI,OAAX,CAAmB,8BAAnB,EAAmD;QACjDC,iBAAiB,EAAE,MAD8B;QAEjDC,gBAAgB,EAAE,IAF+B;QAGjDJ,IAAI,EAAE;MAH2C,CAAnD,EAIGK,IAJH,CAIQ,YAAM;QACZ;QACA/B,KAAK,CAACgC,QAAN,CAAe,iBAAf,EAAkCD,IAAlC,CAAuC,YAAM;UAC3CE,QAAQ,CAACC,MAAT;QACD,CAFD;MAGD,CATD;IAUD;;IACD,OAAOf,OAAO,CAACC,MAAR,CAAe,IAAIe,KAAJ,CAAUb,GAAG,CAACG,OAAJ,IAAe,OAAzB,CAAf,CAAP;EACD,CAvBD,MAwBA;IACE,OAAOH,GAAP;EACD;AACF,CAhCH,EAiCE,UAAAN,KAAK,EAAI;EACPC,OAAO,CAACC,GAAR,CAAY,QAAQF,KAApB,EADO,CACoB;;EAC3B,SAAQ;IACNS,OAAO,EAAET,KAAK,CAACS,OADT;IAENC,IAAI,EAAE,OAFA;IAGNC,QAAQ,EAAE,IAAI;EAHR,CAAR;;EAKA,OAAOR,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAzCH;AA4CA,eAAed,OAAf"}]}