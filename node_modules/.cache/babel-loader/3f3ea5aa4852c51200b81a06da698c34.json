{"remainingRequest":"D:\\Demo\\新建文件夹\\vue2-admin-element-pure\\node_modules\\babel-loader\\lib\\index.js!D:\\Demo\\新建文件夹\\vue2-admin-element-pure\\src\\permission.js","dependencies":[{"path":"D:\\Demo\\新建文件夹\\vue2-admin-element-pure\\src\\permission.js","mtime":1662460432755},{"path":"D:\\Demo\\新建文件夹\\vue2-admin-element-pure\\babel.config.js","mtime":1663636365809},{"path":"D:\\Demo\\新建文件夹\\vue2-admin-element-pure\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Demo\\新建文件夹\\vue2-admin-element-pure\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRDovRGVtby9cdTY1QjBcdTVFRkFcdTY1ODdcdTRFRjZcdTU5MzkvdnVlMi1hZG1pbi1lbGVtZW50LXB1cmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfTWVzc2FnZTIgZnJvbSAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvbWVzc2FnZS5jc3MiOwppbXBvcnQgImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL2Jhc2UuY3NzIjsKaW1wb3J0IF9NZXNzYWdlIGZyb20gImVsZW1lbnQtdWkvbGliL21lc3NhZ2UiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovRGVtby9cdTY1QjBcdTVFRkFcdTY1ODdcdTRFRjZcdTU5MzkvdnVlMi1hZG1pbi1lbGVtZW50LXB1cmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IHJvdXRlciBmcm9tICIuL3JvdXRlciI7CmltcG9ydCBzdG9yZSBmcm9tICIuL3N0b3JlIjsKaW1wb3J0IE5Qcm9ncmVzcyBmcm9tICJucHJvZ3Jlc3MiOwppbXBvcnQgJ25wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzJzsKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgZ2V0UGFnZVRpdGxlIGZyb20gJ0AvdXRpbHMvZ2V0LXBhZ2UtdGl0bGUnOwpOUHJvZ3Jlc3MuY29uZmlndXJlKHsKICBzaG93U3Bpbm5lcjogZmFsc2UKfSk7CnZhciB3aGl0ZUxpc3QgPSBbJy9sb2dpbiddOyAvLyDnmb3lkI3ljZUKCnJvdXRlci5iZWZvcmVFYWNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBmb3JtLCBuZXh0KSB7CiAgICB2YXIgaGFzVG9rZW4sIGhhc0dldFVzZXJJbmZvOwogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBOUHJvZ3Jlc3Muc3RhcnQoKTsgLy8g6K6+572u6aG16Z2i5qCH6aKYCgogICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IGdldFBhZ2VUaXRsZSh0by5tZXRhLnRpdGxlKTsKICAgICAgICAgICAgaGFzVG9rZW4gPSBnZXRUb2tlbigpOwoKICAgICAgICAgICAgaWYgKCFoYXNUb2tlbikgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCEodG8ucGF0aCA9PT0gJy9sb2dpbicpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHQoewogICAgICAgICAgICAgIHBhdGg6ICcvJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI3OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGhhc0dldFVzZXJJbmZvID0gc3RvcmUuZ2V0dGVycy5uYW1lOwoKICAgICAgICAgICAgaWYgKCFoYXNHZXRVc2VySW5mbykgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNDsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE3OwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VzZXIvZ2V0SW5mbycpOwoKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI3OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjA7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMTQpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjQ7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXNlci9yZXNldFRva2VuJyk7CgogICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgX01lc3NhZ2UuZXJyb3IoX2NvbnRleHQudDAgfHwgJ0hhcyBFcnJvcicpOwoKICAgICAgICAgICAgbmV4dCgiL2xvZ2luP3JlZGlyZWN0PSIuY29uY2F0KHRvLnBhdGgpKTsKICAgICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTsKCiAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzA7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgIC8vIOayoeacieS7pOeJjAogICAgICAgICAgICBpZiAod2hpdGVMaXN0LmluZGV4T2YodG8ucGF0aCkgIT09IC0xKSB7CiAgICAgICAgICAgICAgLy8g5Zyo55m95ZCN5Y2V5YaFCiAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIOmDveayoeacieWwsei3s+i9rOWIsOeZu+W9lemhtQogICAgICAgICAgICAgIG5leHQoImxvZ2luP3JlZGlyZWN0PSIuY29uY2F0KHRvLnBhdGgpKTsKICAgICAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzE0LCAyMF1dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gsIF94MiwgX3gzKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7CnJvdXRlci5hZnRlckVhY2goZnVuY3Rpb24gKCkgewogIE5Qcm9ncmVzcy5kb25lKCk7Cn0pOw=="},{"version":3,"names":["router","store","NProgress","getToken","getPageTitle","configure","showSpinner","whiteList","beforeEach","to","form","next","start","document","title","meta","hasToken","path","done","hasGetUserInfo","getters","name","dispatch","error","indexOf","afterEach"],"sources":["D:/Demo/新建文件夹/vue2-admin-element-pure/src/permission.js"],"sourcesContent":["import router from \"./router\"\r\nimport store from \"./store\"\r\nimport { Message } from 'element-ui'\r\nimport NProgress from \"nprogress\"\r\nimport 'nprogress/nprogress.css'\r\nimport { getToken } from '@/utils/auth'\r\nimport getPageTitle from '@/utils/get-page-title'\r\n\r\nNProgress.configure({ showSpinner: false })\r\n\r\nconst whiteList = ['/login'] // 白名单\r\n\r\nrouter.beforeEach(async (to, form, next) => {\r\n  NProgress.start()\r\n\r\n  // 设置页面标题\r\n  document.title = getPageTitle(to.meta.title)\r\n\r\n  const hasToken = getToken()\r\n  if (hasToken) {\r\n    if (to.path === '/login') {\r\n      next({ path: '/' })\r\n      NProgress.done()\r\n    } else {\r\n      const hasGetUserInfo = store.getters.name\r\n      if (hasGetUserInfo) {\r\n        next()\r\n      } else {\r\n        try {\r\n          // 获取最新用户信息\r\n          await store.dispatch('user/getInfo')\r\n          next()\r\n        } catch (error) {\r\n          // 清除令牌跳转登录页\r\n          await store.dispatch('user/resetToken')\r\n          Message.error(error || 'Has Error')\r\n          next(`/login?redirect=${to.path}`)\r\n          NProgress.done()\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    // 没有令牌\r\n    if (whiteList.indexOf(to.path) !== -1) {\r\n      // 在白名单内\r\n      next()\r\n    } else {\r\n      // 都没有就跳转到登录页\r\n      next(`login?redirect=${to.path}`)\r\n      NProgress.done()\r\n    }\r\n  }\r\n})\r\n\r\nrouter.afterEach(() => {\r\n  NProgress.done()\r\n})\r\n"],"mappings":";;;;;;AAAA,OAAOA,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAO,yBAAP;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,YAAP,MAAyB,wBAAzB;AAEAF,SAAS,CAACG,SAAV,CAAoB;EAAEC,WAAW,EAAE;AAAf,CAApB;AAEA,IAAMC,SAAS,GAAG,CAAC,QAAD,CAAlB,C,CAA6B;;AAE7BP,MAAM,CAACQ,UAAP;EAAA,sEAAkB,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;IAAA;IAAA;MAAA;QAAA;UAAA;YAChBT,SAAS,CAACU,KAAV,GADgB,CAGhB;;YACAC,QAAQ,CAACC,KAAT,GAAiBV,YAAY,CAACK,EAAE,CAACM,IAAH,CAAQD,KAAT,CAA7B;YAEME,QANU,GAMCb,QAAQ,EANT;;YAAA,KAOZa,QAPY;cAAA;cAAA;YAAA;;YAAA,MAQVP,EAAE,CAACQ,IAAH,KAAY,QARF;cAAA;cAAA;YAAA;;YASZN,IAAI,CAAC;cAAEM,IAAI,EAAE;YAAR,CAAD,CAAJ;YACAf,SAAS,CAACgB,IAAV;YAVY;YAAA;;UAAA;YAYNC,cAZM,GAYWlB,KAAK,CAACmB,OAAN,CAAcC,IAZzB;;YAAA,KAaRF,cAbQ;cAAA;cAAA;YAAA;;YAcVR,IAAI;YAdM;YAAA;;UAAA;YAAA;YAAA;YAAA,OAkBFV,KAAK,CAACqB,QAAN,CAAe,cAAf,CAlBE;;UAAA;YAmBRX,IAAI;YAnBI;YAAA;;UAAA;YAAA;YAAA;YAAA;YAAA,OAsBFV,KAAK,CAACqB,QAAN,CAAe,iBAAf,CAtBE;;UAAA;YAuBR,SAAQC,KAAR,CAAc,eAAS,WAAvB;;YACAZ,IAAI,2BAAoBF,EAAE,CAACQ,IAAvB,EAAJ;YACAf,SAAS,CAACgB,IAAV;;UAzBQ;YAAA;YAAA;;UAAA;YA8Bd;YACA,IAAIX,SAAS,CAACiB,OAAV,CAAkBf,EAAE,CAACQ,IAArB,MAA+B,CAAC,CAApC,EAAuC;cACrC;cACAN,IAAI;YACL,CAHD,MAGO;cACL;cACAA,IAAI,0BAAmBF,EAAE,CAACQ,IAAtB,EAAJ;cACAf,SAAS,CAACgB,IAAV;YACD;;UAtCa;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAlB;;EAAA;IAAA;EAAA;AAAA;AA0CAlB,MAAM,CAACyB,SAAP,CAAiB,YAAM;EACrBvB,SAAS,CAACgB,IAAV;AACD,CAFD"}]}