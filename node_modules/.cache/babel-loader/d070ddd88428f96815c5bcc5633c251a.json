{"remainingRequest":"D:\\Demo\\test\\vue2-admin-element-pure\\node_modules\\babel-loader\\lib\\index.js!D:\\Demo\\test\\vue2-admin-element-pure\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\Demo\\test\\vue2-admin-element-pure\\src\\store\\modules\\user.js","mtime":1662460333363},{"path":"D:\\Demo\\test\\vue2-admin-element-pure\\babel.config.js","mtime":1663636365809},{"path":"D:\\Demo\\test\\vue2-admin-element-pure\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Demo\\test\\vue2-admin-element-pure\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCB7IGdldFVzZXJJbmZvLCBsb2dpbiBhcyBfbG9naW4sIGxvZ291dCBhcyBfbG9nb3V0IH0gZnJvbSAnQC9hcGkvdXNlcic7CmltcG9ydCB7IGdldFRva2VuLCByZW1vdmVUb2tlbiwgc2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgeyByZXNldFJvdXRlciB9IGZyb20gIkAvcm91dGVyIjsKCnZhciBnZXREZWZhdWx0U3RhdGUgPSBmdW5jdGlvbiBnZXREZWZhdWx0U3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIHRva2VuOiBnZXRUb2tlbigpLAogICAgbmFtZTogJycsCiAgICBhdmF0YXI6ICcnLAogICAgdXNlckluZm86IHt9CiAgfTsKfTsKCnZhciBzdGF0ZSA9IGdldERlZmF1bHRTdGF0ZSgpOwp2YXIgbXV0YXRpb25zID0gewogIFJFU0VUX1NUQVRFOiBmdW5jdGlvbiBSRVNFVF9TVEFURShzdGF0ZSkgewogICAgLy8gIE9iamVjdC5hc3NpZ27lkIjlubblr7nosaHvvIzph43nva5zdGF0ZQogICAgT2JqZWN0LmFzc2lnbihzdGF0ZSwgZ2V0RGVmYXVsdFN0YXRlKCkpOwogIH0sCiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX05BTUU6IGZ1bmN0aW9uIFNFVF9OQU1FKHN0YXRlLCBuYW1lKSB7CiAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICB9LAogIFNFVF9BVkFUQVI6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoc3RhdGUsIGF2YXRhcikgewogICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogIH0sCiAgU0VUX1VTRVJJTkZPOiBmdW5jdGlvbiBTRVRfVVNFUklORk8oc3RhdGUsIGRhdGEpIHsKICAgIHN0YXRlLmRhdGEgPSBkYXRhOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHVzZXJJbmZvKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICB2YXIgdXNlcm5hbWUgPSB1c2VySW5mby51c2VybmFtZSwKICAgICAgICBwYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXZlcnNlLCByZWplY3QpIHsKICAgICAgX2xvZ2luKHsKICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUudHJpbSgpLAogICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZC50cmltKCkKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YTsKICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIGRhdGEudXNlci50b2tlbik7CiAgICAgICAgc2V0VG9rZW4oZGF0YS51c2VyLnRva2VuKTsKICAgICAgICByZXZlcnNlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBnZXRJbmZvOiBmdW5jdGlvbiBnZXRJbmZvKF9yZWYyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBnZXRVc2VySW5mbyhzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YTsKCiAgICAgICAgaWYgKCFkYXRhKSB7CiAgICAgICAgICByZXR1cm4gcmVqZWN0KCfpqozor4HlpLHotKXvvIzor7fph43mlrDnmbvlvZXjgIInKTsKICAgICAgICB9CgogICAgICAgIHZhciBuYW1lID0gZGF0YS5uYW1lLAogICAgICAgICAgICBhdmF0YXIgPSBkYXRhLmF2YXRhcjsKICAgICAgICBjb21taXQoJ1NFVF9OQU1FJywgbmFtZSk7CiAgICAgICAgY29tbWl0KCdTRVRfQVZBVEFSJywgYXZhdGFyKTsKICAgICAgICBjb21taXQoJ1NFVF9VU0VSSU5GTycsIGRhdGEpOwogICAgICAgIHJlc29sdmUoZGF0YSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2xvZ291dChzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAoKICAgICAgICByZXNldFJvdXRlcigpOwogICAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICByZXNldFRva2VuOiBmdW5jdGlvbiByZXNldFRva2VuKF9yZWY0KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"names":["getUserInfo","login","logout","getToken","removeToken","setToken","resetRouter","getDefaultState","token","name","avatar","userInfo","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","SET_USERINFO","data","actions","commit","username","password","Promise","reverse","reject","trim","then","res","user","catch","error","getInfo","resolve","resetToken","namespaced"],"sources":["D:/Demo/test/vue2-admin-element-pure/src/store/modules/user.js"],"sourcesContent":["import { getUserInfo, login, logout } from '@/api/user'\r\nimport { getToken, removeToken, setToken } from '@/utils/auth'\r\nimport { resetRouter } from \"@/router\"\r\n\r\nconst getDefaultState = () => {\r\n  return {\r\n    token: getToken(),\r\n    name: '',\r\n    avatar: '',\r\n    userInfo: {}\r\n  }\r\n}\r\n\r\nconst state = getDefaultState()\r\n\r\nconst mutations = {\r\n  RESET_STATE: (state) => {\r\n    //  Object.assign合并对象，重置state\r\n    Object.assign(state, getDefaultState())\r\n  },\r\n\r\n  SET_TOKEN: (state, token) => {\r\n    state.token = token\r\n  },\r\n\r\n  SET_NAME: (state, name) => {\r\n    state.name = name\r\n  },\r\n\r\n  SET_AVATAR: (state, avatar) => {\r\n    state.avatar = avatar\r\n  },\r\n\r\n  SET_USERINFO: (state, data) => {\r\n    state.data = data\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  login({ commit }, userInfo) {\r\n    const { username, password } = userInfo\r\n    return new Promise((reverse, reject) => {\r\n      login({ username: username.trim(), password: password.trim() }).then(res => {\r\n        const { data } = res\r\n        commit('SET_TOKEN', data.user.token)\r\n        setToken(data.user.token)\r\n        reverse()\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n\r\n  getInfo({ commit, state }) {\r\n    return new Promise((resolve, reject) => {\r\n      getUserInfo(state.token).then(res => {\r\n        const { data } = res\r\n        if (!data) {\r\n          return reject('验证失败，请重新登录。')\r\n        }\r\n        const { name, avatar } = data\r\n        commit('SET_NAME', name)\r\n        commit('SET_AVATAR', avatar)\r\n        commit('SET_USERINFO', data)\r\n        resolve(data)\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n\r\n  logout({ commit, state }) {\r\n    return new Promise((resolve, reject) => {\r\n      logout(state.token).then(() => {\r\n        removeToken() // must remove  token  first\r\n        resetRouter()\r\n        commit('RESET_STATE')\r\n        resolve()\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n\r\n  resetToken({ commit }) {\r\n    return new Promise(resolve => {\r\n      removeToken()\r\n      commit('RESET_STATE')\r\n      resolve()\r\n    })\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}"],"mappings":"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"}]}